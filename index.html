<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Norma Tale - Красиво (Lyrics)</title>
    <style>
        body {
            background-color: #050505;
            color: #d4d4d4;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* Центрированный контейнер для текста */
        #lyrics-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 90%;
            max-width: 900px;
        }

        .line {
            font-size: 1.6rem;
            margin: 10px 0;
            min-height: 2rem;
            transition: all 0.8s ease;
            opacity: 0;
        }

        /* Стиль текущей строки */
        .active {
            opacity: 1;
            color: #ffffff;
            transform: scale(1.05);
            text-shadow: 0 0 15px rgba(255,255,255,0.4);
        }

        /* Стиль уходящих строк */
        .past {
            opacity: 0.2;
            transform: scale(0.9);
            filter: blur(1px);
        }

        /* Кнопка запуска */
        #start-btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            background: transparent;
            color: white;
            border: 1px solid white;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            z-index: 10;
        }

        #start-btn:hover {
            background: white;
            color: black;
            box-shadow: 0 0 20px rgba(255,255,255,0.5);
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <button id="start-btn">Запустить текст</button>
    <div id="lyrics-box" class="hidden"></div>

    <script>
        const lyrics = [
            { text: "Ты красивая, как пламя керосина", time: 2800 },
            { text: "Как букетик гипсофил", time: 2200 },
            { text: "и как вода в ночи иссиня", time: 2400 },
            { text: "Как цветы паучьей лилии", time: 2300 },
            { text: "как дождь над Хиросимой", time: 2400 },
            { text: "Как готические храмы", time: 2200 },
            { text: "и как призраки Цусимы", time: 2600 },
            { text: "Ты красивая, как дождь на окровавленном паркете", time: 3800 },
            { text: "Как нейтронная звезда сверкает выженной планете", time: 3800 },
            { text: "Ты красива, как луна над самой страшной тёмной чащей", time: 3800 },
            { text: "Ты красивая, как кайф, который путают со счастьем", time: 4000 }
        ];

        const btn = document.getElementById('start-btn');
        const box = document.getElementById('lyrics-box');

        async function startLyrics() {
            btn.classList.add('hidden'); // Скрываем кнопку
            box.classList.remove('hidden'); // Показываем контейнер

            for (let i = 0; i < lyrics.length; i++) {
                // Создаем новую строку
                const lineDiv = document.createElement('div');
                lineDiv.className = 'line active';
                box.appendChild(lineDiv);

                // Заставляем предыдущие строки потускнеть
                const allLines = box.querySelectorAll('.line');
                allLines.forEach(l => {
                    if (l !== lineDiv) l.className = 'line past';
                });

                // Ограничиваем количество строк на экране (убираем совсем старые)
                if (allLines.length > 5) {
                    allLines[0].style.marginTop = '-50px';
                    allLines[0].style.opacity = '0';
                    setTimeout(() => allLines[0].remove(), 800);
                }

                // Эффект печати внутри строки
                await typeText(lineDiv, lyrics[i].text, lyrics[i].time);
            }
        }

        function typeText(element, text, duration) {
            return new Promise(resolve => {
                let charIndex = 0;
                // Оставляем запас времени на паузу между строками
                const typingDuration = duration - 400; 
                const speed = typingDuration / text.length;

                function nextChar() {
                    if (charIndex < text.length) {
                        element.textContent += text[charIndex];
                        charIndex++;
                        setTimeout(nextChar, speed);
                    } else {
                        // Ждем остаток времени перед следующей строкой
                        setTimeout(resolve, 400);
                    }
                }
                nextChar();
            });
        }

        btn.addEventListener('click', startLyrics);
    </script>
</body>
</html>
